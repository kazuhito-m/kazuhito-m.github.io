---
layout: post
title: Ubuntu用Slack公式クライアントのデータバックアップ/移行
category: tech
tags: [ubuntu,slack,databackup]
---

いつもうまく行かない…のだけど「なんとなく傾向と対策が見えた」ので、備忘録しておきます。

# これを読んで得られるもの

- Slack公式クライアント(forUbuntu)の設定データの他マシン移動
- 設定データのざっくりとした構造

# 前提

- Ubuntu 16.10
- [Slack公式クライアント（forUbuntu） 2.3.4](https://downloads.slack-edge.com/linux_releases/slack-desktop-2.3.4-amd64.deb")
- この記事は確実性を保証するものではありません
  - 環境の違いにより以下の通りにならないかもしれません
  - 上記のSlackクライアントのバージョンの違うものは移行できません

# やったこと

## 原則

Ubuntuデスクトップで、`dpkg` でパッケージインストールをしていた場合、

```
~/.config/Slack
```

ディレクトリに設定があるので、ここを固めて運ぶなり、そのままネットワーク越しにコピーするなりすれば良いです。

## もうちょっと詳しく

`~/.config/Slack` ディレクトリは、以下のファイル構成になっているようです。(プログラム停止時)

- Cache : キャッシュファイル(バイナリ)が入ってる
- Cookies : 認証情報がSQLite形式で保存している
- Cookies-journal : SQLiteのジャーナルファイル
- Local Storage : チャンネルかDLデータなどのこれまたSQLite形式データ群
- dictionaries : (おそらく？)言語別情報
- logs : アプリのログ
- redux-state.json : 登録しているチームの情報ファイル

しかし、大体が「起動時に都度生成するもの」なので…

1. Cookies
0. redux-state.json

の２つだけをコピーorバックアップしておけば良いです。

## 注意

わりかし、「Slackクライアントのバージョン違いで微妙※に設定データが無効になる」ので、「移行先のSlackクライアントバージョンを合わせる」か「移行できなかったら諦める」くらいの心づもりをしたほうが良さそうです。

※いくつかのチームだけ表示されるなど


---

# 小並感

注意のところの事情がわからなくて、ずっと「あーでもないこーでもない」ってハマったりしていたのを解消できて良かったです。

…ま、「他人(他社)が作ったアプリを調べてる」のだから、解消もへったくれもないのですがｗ
